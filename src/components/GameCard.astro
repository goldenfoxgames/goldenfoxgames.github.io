---
interface Props {
  title: string;
  description: string;
  genre?: string;
  image?: string;
  links?: Array<{
    platform: string;
    url: string;
  }>;
}

const { title, description, genre, image, links = [] } = Astro.props;

const platformIcons: Record<string, string> = {
  'App Store': `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>`,
  'Google Play': `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M3.609 1.814L13.792 12 3.609 22.186a.996.996 0 0 1-.609-.92V2.734a1 1 0 0 1 .609-.92zm10.89 10.893l2.302 2.302-10.937 6.333 8.635-8.635zm3.199-3.198l2.807 1.626a1 1 0 0 1 0 1.73l-2.808 1.626L15.206 12l2.492-2.491zM5.864 2.658L16.8 9.99l-2.302 2.302-8.634-8.634z"/></svg>`,
  'Steam': `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M11.979 0C5.678 0 .511 4.86.022 11.037l6.432 2.658c.545-.371 1.203-.59 1.912-.59.063 0 .125.004.188.006l2.861-4.142V8.91c0-2.495 2.028-4.524 4.524-4.524 2.494 0 4.524 2.031 4.524 4.527s-2.03 4.525-4.524 4.525h-.105l-4.076 2.911c0 .052.004.105.004.159 0 1.875-1.515 3.396-3.39 3.396-1.635 0-3.016-1.173-3.331-2.727L.436 15.27C1.862 20.307 6.486 24 11.979 24c6.627 0 11.999-5.373 11.999-12S18.605 0 11.979 0zM7.54 18.21l-1.473-.61c.262.543.714.999 1.314 1.25 1.297.539 2.793-.076 3.332-1.375.263-.63.264-1.319.005-1.949s-.75-1.121-1.377-1.383c-.624-.26-1.29-.249-1.878-.03l1.523.63c.956.4 1.409 1.5 1.009 2.455-.397.957-1.497 1.41-2.454 1.012H7.54zm11.415-9.303c0-1.662-1.353-3.015-3.015-3.015-1.665 0-3.015 1.353-3.015 3.015 0 1.665 1.35 3.015 3.015 3.015 1.663 0 3.015-1.35 3.015-3.015zm-5.273-.005c0-1.252 1.013-2.266 2.265-2.266 1.249 0 2.266 1.014 2.266 2.266 0 1.251-1.017 2.265-2.266 2.265-1.253 0-2.265-1.014-2.265-2.265z"/></svg>`,
  'itch.io': `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M3.13 1.338C2.08 1.96.02 4.328 0 4.95v1.03c0 1.303 1.22 2.45 2.325 2.45 1.33 0 2.436-1.058 2.436-2.336 0 1.278 1.07 2.336 2.4 2.336 1.328 0 2.362-1.058 2.362-2.336 0 1.278 1.137 2.336 2.466 2.336h.024c1.33 0 2.466-1.058 2.466-2.336 0 1.278 1.034 2.336 2.363 2.336 1.33 0 2.4-1.058 2.4-2.336 0 1.278 1.106 2.336 2.435 2.336C22.78 8.43 24 7.282 24 5.98V4.95c-.02-.62-2.082-2.99-3.13-3.612-1.61-.09-4.418-.09-8.87-.09-4.452 0-7.26 0-8.87.09zm2.186 6.594c-.31.6-.983.998-1.817 1.168v8.652h4.49v-4.776c0-.26.48-1.27 1.996-1.27h4.01c1.517 0 2 1.01 2 1.27v4.776h4.49v-8.652c-.834-.17-1.506-.567-1.816-1.168-.53.376-1.28.628-2.136.628-.874 0-1.652-.276-2.21-.678-.554.402-1.392.678-2.32.678-.93 0-1.768-.276-2.322-.678-.558.402-1.336.678-2.21.678-.856 0-1.607-.252-2.137-.628zm7.04 5.53c-.082.118-.473.474-.473.96v3.332h4.073v-3.333c0-.485-.39-.84-.472-.96-.108-.156-.04-.126-.26-.126H12.57c-.216 0-.153-.03-.26.126h.047z"/></svg>`,
};
---

<article class="group">
  <!-- Image with title overlay -->
  {image && (
    <div class="relative aspect-[16/10] overflow-hidden rounded-sm">
      <img
        src={image}
        alt={title}
        class="w-full h-full object-cover transition-all duration-500 group-hover:scale-105 group-hover:brightness-110"
        loading="lazy"
      />
      <!-- Gradient overlay -->
      <div class="absolute inset-0 bg-gradient-to-t from-fox-950 via-fox-950/20 to-transparent"></div>
      <!-- Title on image -->
      <div class="absolute bottom-0 left-0 right-0 p-5">
        <h3 class="text-2xl font-heading font-bold text-warm-50 mb-1">
          {title}
        </h3>
        {genre && (
          <p class="text-sm text-warm-400">{genre}</p>
        )}
      </div>
    </div>
  )}

  <!-- Description and links -->
  <div class="pt-4 px-3">
    <p class="text-warm-400 text-sm leading-relaxed mb-4">
      {description}
    </p>

    {links.length > 0 && (
      <div class="flex flex-wrap gap-4">
        {links.map(({ platform, url }) => (
          <a
            href={url}
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-2 text-sm text-warm-300 hover:text-gold-500 transition-colors"
          >
            <span set:html={platformIcons[platform] || ''} />
            <span>{platform}</span>
          </a>
        ))}
      </div>
    )}
  </div>
</article>
