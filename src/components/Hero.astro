---
import { ChevronDown } from 'lucide-astro';
---

<section id="hero" class="hero-height flex items-center justify-center relative overflow-hidden">
  <!-- SVG dither filter - desktop only, mobile uses noise texture -->
  <svg width="0" height="0" aria-hidden="true" style="position:fixed">
    <filter id="dither" color-interpolation-filters="sRGB" x="0" y="0" width="1" height="1">
      <feTurbulence type="fractalNoise" baseFrequency="0.7" numOctaves="4" result="noise"/>
      <feDisplacementMap in="SourceGraphic" in2="noise" scale="250" xChannelSelector="R" yChannelSelector="G"/>
      <feBlend in2="SourceGraphic" mode="normal"/>
    </filter>
  </svg>

  <!-- Particle container -->
  <div class="particles absolute inset-0 pointer-events-none" aria-hidden="true"></div>

  <!-- Subtle gradient background - uses explicit rgba to avoid transparent-black issue on iOS -->
  <!-- Starts with solid #0D0D0D to match iOS status bar theme-color -->
  <!-- Gradient with extra stops to minimize banding on mobile (no dithering) -->
  <div class="absolute inset-0 pointer-events-none dither-gradient" style="background: linear-gradient(to bottom,
    #0D0D0D 0%,
    #0D0D0D 5%,
    rgba(22, 22, 22, 0.45) 10%,
    rgba(22, 22, 22, 0.4) 15%,
    rgba(22, 22, 22, 0.35) 20%,
    rgba(22, 22, 22, 0.3) 25%,
    rgba(22, 22, 22, 0.25) 30%,
    rgba(18, 18, 18, 0.18) 35%,
    rgba(15, 15, 15, 0.1) 40%,
    rgba(13, 13, 13, 0.05) 45%,
    rgba(13, 13, 13, 0) 50%,
    rgba(13, 13, 13, 0.08) 55%,
    rgba(13, 13, 13, 0.15) 60%,
    rgba(13, 13, 13, 0.2) 65%,
    rgba(13, 13, 13, 0.3) 70%,
    rgba(13, 13, 13, 0.4) 75%,
    rgba(13, 13, 13, 0.5) 80%,
    rgba(13, 13, 13, 0.65) 85%,
    rgba(13, 13, 13, 0.8) 90%,
    rgba(13, 13, 13, 0.9) 95%,
    #0D0D0D 100%
  );"></div>

  <div class="relative z-10 text-center px-6">
    <!-- Logo -->
    <div class="mb-10">
      <img src="/img/logo.svg" alt="Golden Fox logo" class="w-28 h-28 mx-auto" />
    </div>

    <!-- Company Name -->
    <h1 class="hero-title text-5xl md:text-6xl lg:text-7xl font-heading font-bold text-warm-50 tracking-tight mb-4">
      Golden Fox
    </h1>

    <!-- Tagline -->
    <p class="text-lg md:text-xl text-warm-400 mb-12">
      Indie Game Studio
    </p>

    <!-- CTA -->
    <a href="#games" class="btn btn-primary btn-underline">
      View Our Games
    </a>
  </div>

  <!-- Scroll indicator -->
  <a href="#about" class="absolute bottom-8 left-1/2 -translate-x-1/2 scroll-indicator text-warm-500 hover:text-gold-500 transition-colors" aria-label="Scroll down">
    <ChevronDown class="w-5 h-5" />
  </a>
</section>

<script>
  // Generate particles - subtle floating dots
  const container = document.querySelector('.particles');
  if (container) {
    const particleCount = 15;
    for (let i = 0; i < particleCount; i++) {
      const particle = document.createElement('div');
      particle.className = 'particle';
      particle.style.left = `${Math.random() * 100}%`;
      particle.style.top = `${50 + Math.random() * 50}%`; // Lower half only
      const size = Math.random() * 2 + 2;
      particle.style.width = `${size}px`;
      particle.style.height = `${size}px`;
      particle.style.opacity = `${Math.random() * 0.3 + 0.4}`;
      particle.style.animation = `particle-float ${Math.random() * 15 + 20}s linear infinite, particle-glow 3s ease-in-out infinite alternate`;
      particle.style.animationDelay = `${Math.random() * 15}s`;
      container.appendChild(particle);
    }
  }

  // Hide scroll indicator on scroll
  const scrollIndicator = document.querySelector('.scroll-indicator');
  if (scrollIndicator) {
    let hidden = false;
    window.addEventListener('scroll', () => {
      if (!hidden && window.scrollY > 100) {
        scrollIndicator.style.opacity = '0';
        scrollIndicator.style.transition = 'opacity 0.5s';
        hidden = true;
      }
    }, { passive: true });
  }
</script>
